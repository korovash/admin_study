# Учебная программа — DevOps пет-проект (VM + Python + Postgres + Nginx)

## Шаг 0. Подготовка окружения (установка VirtualBox и Rocky Linux)

### Теория и навыки
- Установка гипервизора VirtualBox (Windows, Linux или macOS).
- Загрузка ISO-образа Rocky Linux (например, 9.x) с официального сайта.
- Создание виртуальной машины в VirtualBox:
  - Новый → имя `rocky-devops`, тип Linux, версия Red Hat (64-bit).
  - Выделить минимум 2 ГБ RAM (лучше 4 ГБ) и 20 ГБ HDD.
  - Указать ISO-образ для установки.
- Установка ОС Rocky Linux пошагово:
  - Выбор языка и раскладки клавиатуры.
  - Настройка диска (автоматическая разметка).
  - Создание пользователя `student` и установка root-пароля.
  - Настройка сетевого интерфейса (включить DHCP).
  - Запуск установки.
- Первоначальная настройка после загрузки:
  - Подключение по консоли.
  - Проверка версии ОС: `cat /etc/os-release`.
  - Проверка IP-адреса: `ip a`.
  - Подключение по SSH: `ssh student@<ip>`.

### Упражнения для закрепления

#### Лёгкие
- Скачайте ISO Rocky Linux и создайте виртуальную машину в VirtualBox.
- Запустите систему и убедитесь, что работает сеть (команда `ping 8.8.8.8`).

#### Средние
- Создайте снимок (snapshot) виртуальной машины после установки, чтобы можно было откатиться.
- Настройте автоподключение сетевого интерфейса (проверить через `nmcli connection show`).

#### Сложные
- Настройте VirtualBox так, чтобы у виртуальной машины был проброшен порт 22 (NAT → Port Forwarding) для SSH-доступа с хоста.
- Попробуйте установить дополнения гостевой ОС VirtualBox (Guest Additions) и подключить общую папку с хостом.

---

## Модуль 1. Подготовка и работа с системой (на примере RPM-дистрибутива, например, CentOS Stream 9 / Rocky Linux 9)

### Теория и навыки
- Что такое RPM-дистрибутивы, чем отличаются от Debian-подобных.
- Как получить базовую информацию о системе: `uname -a`, `cat /etc/os-release`, `hostnamectl`.
- Как посмотреть ресурсы: `top`, `htop`, `free -h`, `df -h`, `du -sh`, `uptime`.
- Директории Linux:
  - `/` — корневая файловая система.
  - `/bin`, `/sbin` — системные команды.
  - `/etc` — конфигурационные файлы.
  - `/home` — домашние каталоги пользователей.
  - `/var` — логи, временные данные.
  - `/usr` — приложения и библиотеки.
  - `/tmp` — временные файлы.
- Управление пользователями: `useradd`, `passwd`, `usermod`, `id`, `groups`.
- Права и типы файлов: чтение/запись/выполнение (`ls -l`), изменение (`chmod`, `chown`, `chgrp`).
- Установка пакетов: `dnf install`, `dnf remove`, `dnf update`, `dnf search`.
- Логи: `journalctl`, `/var/log/messages`, `/var/log/secure`, `dmesg`.
- Часто используемые команды админа: `systemctl`, `ps aux`, `kill`, `netstat -tulnp` / `ss -tulnp`, `ip a`, `ping`, `curl`, `scp`, `rsync`.

### Упражнения для закрепления

#### Лёгкие
- Узнайте версию системы и ядра с помощью двух разных команд.
- Создайте нового пользователя `student` и зайдите под ним.
- Посмотрите, сколько места занимает `/var`.

#### Средние
- Настройте паролю пользователя `student` срок действия на 30 дней.
- Установите пакет `htop` и убедитесь, что он работает.
- Создайте файл в `/tmp`, измените права так, чтобы только владелец мог читать и писать.

#### Сложные
- Создайте группу `admins`, добавьте туда пользователя `student` и настройте, чтобы он мог выполнять команды от имени суперпользователя через `sudo`.
- Настройте сервис `sshd` так, чтобы root не мог подключаться по SSH.
- Соберите список всех процессов, которые используют больше 10% CPU, и сохраните его в файл `/home/student/proclist.txt`.

---

## Модуль 2. Работа с пользователями, правами, пакетами и логами

### Теория и навыки
- Управление пользователями и группами глубже: `/etc/passwd`, `/etc/group`, `/etc/shadow`.
- Настройка sudo: файл `/etc/sudoers`, группа `wheel`.
- Типы файлов в Linux: обычные файлы, директории, символьные ссылки, устройства, сокеты.
- Управление правами доступа через числовую и символьную форму (`chmod 644`, `chmod u+x file`).
- Проверка владельца: `stat`, `ls -ld`.
- Работа с пакетами и репозиториями: `dnf repolist`, `dnf info`, подключение EPEL.
- Управление сервисами: `systemctl start/stop/enable/status`.
- Работа с логами через `journalctl -u <service>`, фильтрация по времени.

### Упражнения для закрепления

#### Лёгкие
- Создайте группу `dev` и добавьте в неё своего пользователя.
- Узнайте, какие пакеты установлены в системе, содержащие слово `python`.
- Посмотрите последние 20 строк системного журнала.

#### Средние
- Настройте пользователя так, чтобы при входе он попадал в нестандартную оболочку (например, `/bin/sh`).
- Настройте службу `crond` так, чтобы она запускалась автоматически после перезагрузки.
- Создайте символьную ссылку на файл в `/etc`, сохраните её в `/home/student/`.

#### Сложные
- Настройте sudo так, чтобы пользователь `student` мог запускать только команды `systemctl status` и `journalctl` без пароля.
- Настройте таймер systemd (unit .timer), который будет запускать скрипт очистки временных файлов в `/tmp` каждые 12 часов.
- Создайте systemd unit-файл для своего скрипта, который выводит дату и время в файл `/tmp/datetime.log` каждые 10 секунд.

